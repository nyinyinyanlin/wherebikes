<html>
  <head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
          integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
            integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
            crossorigin=""></script>
    <style>

      html, body, #map {
        height: 100%;
        width: 100vw;
        margin: 0;
        padding: 0;
      }

      body {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #container {
        width: 100vw;
        height: 100%;
        background-color: white;
        position: absolute;
        display: none;
        overflow: scroll;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 3;
      }

      #map {
        position: absolute;
        display: block;
        z-index: 1;
      }

      #msg {
        position: absolute;
        bottom: 2%;
        width: auto;
        text-align: center;
        background-color: white;
        border-radius: 10px;
        padding: 2px 5px 0px 5px;
        box-shadow: 0px 2px 2px 1px #888888;
        z-index: 2;
      }

      .visible {
        visibility: visible;
      }

      .bp, .br{
        display: none;
      }

      .bs {
        display: table-row;
      }

      table {
        width: 100%;
      }

      table tr {
        width: 100%;
      }

      table tr td {
        width: 60%;
      }

      table tr td:first-child {
        text-align: right;
        width: 40%;
      }

    </style>
  </head>
  <body>
     <div id="container">
      <table>
        <tr class="visible">
          <td>Category:</td>
          <td>
            <select size="1" id="category">
              <option value="Bicycle Shop">Bicycle Shop</option>
              <option value="Bicycle Parking">Bicycle Parking</option>
              <option value="Bicycle Rental">Bicycle Rental</option>
            </select>
          </td>
        </tr>
        <tr class="bs">
          <td>Name (ENG)</td>
          <td><input id="engname" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Name (BUR)</td>
          <td><input id="burname" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Address</td>
          <td><input id="address" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Building No.</td>
          <td><input id="building" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Zip Code</td>
          <td><input id="zipcode" type="text"></input></td>
        </tr>
        <tr class="bs br">
          <td>Business Hour</td>
          <td><input id="businesshour" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Phone</td>
          <td><input id="phone" type="text"></input></td>
        </tr>
        <tr class="bs br">
          <td>Website</td>
          <td><input id="website" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Email</td>
          <td><input id="email" type="text"></input></td>
        </tr>
        <tr class="bs br bp">
          <td>Owner</td>
          <td><input id="owner" type="text"></input></td>
        </tr>
        <tr class="bs">
          <td>Wifi</td>
          <td><input id="wifi" type="checkbox"></input></td>
        </tr>
        <tr class="bs br bp">
          <td>Comment</td>
          <td><textarea id="comment"></textarea></td>
        </tr>
        <tr class="bs br bp">
          <td></td>
          <td>
            <input id="cancel" type="button" value="Cancel"></input>
            <input id="submit" type="button" value="Submit"></input>
          </td>
        </tr>
      </table>
     </div>
     <div id="msg">No Location</div>
     <div id="map"></div>
     <script>
       var map = L.map('map').setView([16.8512554,96.1669349], 13);
       var tileLayer = L.tileLayer('https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=93ef963bdd124779b6a73b2f66fcf9e6', {
                         maxZoom: 19,
                         attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                       });
       tileLayer.addTo(map);
       map.locate({setView: true, maxZoom: 18, enableHighAccuracy: true, watch: true});
       var marker = L.marker(map.getCenter(),{draggable:false}).addTo(map);
       marker.on('click', function(e){
         $("#container").css("display","flex");
       });

       var circle;
       /*function updateMarker(e){
         var radius = e.accuracy / 2;
         if(marker != undefined){
           map.removeLayer(marker);
         };
         if(circle != undefined){
           map.removeLayer(circle);
         }
         marker = L.marker(e.center,{draggable:false}).addTo(map);
         circle = L.circle(e.center,radius).addTo(map);
         $("#msg").html(marker.getLatLng().lat.toFixed(6)+" : "+marker.getLatLng().lng.toFixed(6));
         marker.on('drag', function (e) {
           if (circle != undefined) {
             map.removeLayer(circle);
           };
           circle = L.circle(e.latlng,radius).addTo(map);
           $("#msg").html(marker.getLatLng().lat.toFixed(6)+" : "+marker.getLatLng().lng.toFixed(6));
         });
       }*/

       function onLocationFound(e) {
         if(circle!=undefined){
           circle.setRadius(e.accuracy/2);
         } else{
           circle = L.circle(e.latlng,e.accuracy/2).addTo(map);
         }
       }
       map.on('locationfound', onLocationFound);

       function onLocationError(e) {
         if(circle!=undefined){
           map.removeLayer(circle);
         }
         circle = undefined;
         alert(e.message);
       }
       map.on('locationerror', onLocationError);

       function onMapMove(e){
         var center = map.getCenter();
         marker.setLatLng(center);
         if(circle!=undefined){
           circle.setLatLng(center);
         }
         $("#msg").html(center.lat.toFixed(6)+" : "+center.lng.toFixed(6));
       }
       map.on('move',onMapMove);

     </script>
     <script>
      $(document).ready(function(){
        $("#category").on("change",function(){
          switch($("#category").val()){
            case "Bicycle Shop":
              $(".bp").hide(200);
              $(".br").hide(200);
              $(".bs").show(200);
              break;
            case "Bicycle Parking":
              $(".bs").hide(200);
              $(".br").hide(200);
              $(".bp").show(200);
              break;
            case "Bicycle Rental":
              $(".bs").hide(200);
              $(".bp").hide(200);
              $(".br").show(200);
              break;
          }
        });
        $("#cancel").on("click",function(){
          $("#container").hide();
        });
      });
     </script>
  </body>
</html>
